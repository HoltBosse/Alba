import{c as e}from"../index-Bk8j52k6.mjs";import{c as t,P as o}from"../tiptap-pm-entry-C1u8SbQo.mjs";var r=({key:e,editor:r,onPaste:a,onDrop:n,allowedMimeTypes:i})=>new o({key:e||new t("fileHandler"),props:{handleDrop(e,t){var o;if(!n)return!1;if(!(null==(o=t.dataTransfer)?void 0:o.files.length))return!1;const a=e.posAtCoords({left:t.clientX,top:t.clientY});let l=Array.from(t.dataTransfer.files);return i&&(l=l.filter(e=>i.includes(e.type))),0!==l.length&&(t.preventDefault(),t.stopPropagation(),n(r,l,(null==a?void 0:a.pos)||0),!0)},handlePaste(e,t){var o;if(!a)return!1;if(!(null==(o=t.clipboardData)?void 0:o.files.length))return!1;let n=Array.from(t.clipboardData.files);const l=t.clipboardData.getData("text/html");return i&&(n=n.filter(e=>i.includes(e.type))),0!==n.length&&(t.preventDefault(),t.stopPropagation(),a(r,n,l),!(l.length>0))}}}),a=e.create({name:"fileHandler",addOptions:()=>({onPaste:void 0,onDrop:void 0,allowedMimeTypes:void 0}),addProseMirrorPlugins(){return[r({key:new t(this.name),editor:this.editor,allowedMimeTypes:this.options.allowedMimeTypes,onDrop:this.options.onDrop,onPaste:this.options.onPaste})]}}),n=a;export{r as FileHandlePlugin,a as FileHandler,n as default};
